# crayte-studio 実装計画

> ホラー体験 ARG: 架空企業コーポレートサイト（表）と WordPress 風管理画面（裏）

**作成日**: 2026-01-24
**最終更新**: 2026-01-24
**ステータス**: Phase 4 完了（コア機能実装済み）

---

## 1. 概要

### 1.1 プロジェクトの目的

「crayte-studio」は、表向きは普通の Web 制作会社のコーポレートサイトだが、裏側（管理画面）にアクセスすると異常なメタデータや状態が徐々に見えてくるホラー体験 ARG（代替現実ゲーム）。

### 1.2 二層構造

| 層                   | URL           | 目的                     | 雰囲気                       |
| -------------------- | ------------- | ------------------------ | ---------------------------- |
| **表（公開サイト）** | `/` 以下      | 普通のコーポレートサイト | クリーン、プロフェッショナル |
| **裏（管理画面）**   | `/admin` 以下 | WordPress 風 CMS UI      | 不穏、徐々に異常が露呈       |

### 1.3 技術スタック

- **フレームワーク**: Next.js 16.1.4 (App Router)
- **言語**: TypeScript
- **UI**: React 19.2.3
- **スタイリング**: CSS Modules + CSS Variables
- **データ**: JSON ファイル（静的データ）→ 将来的に CMS 連携可能な設計

---

## 2. 作業分析

### 2.1 スコープ

#### 公開サイト（7 ページ）

| パス            | ページ名     | 種別         |
| --------------- | ------------ | ------------ |
| `/`             | TOP          | 静的         |
| `/company`      | 会社概要     | 静的         |
| `/services`     | サービス     | 静的         |
| `/works`        | 制作実績一覧 | 動的（一覧） |
| `/works/[slug]` | 制作実績詳細 | 動的（詳細） |
| `/news`         | ニュース一覧 | 動的（一覧） |
| `/news/[slug]`  | ニュース詳細 | 動的（詳細） |
| `/staff`        | 社員一覧     | 動的（一覧） |
| `/staff/[slug]` | 社員詳細     | 動的（詳細） |
| `/contact`      | お問い合わせ | フォーム     |

#### 管理画面（12 セクション）

| セクション | 機能                         | 優先度 |
| ---------- | ---------------------------- | ------ |
| Dashboard  | 概要、統計、通知             | 高     |
| Posts      | 投稿管理（CRUD）             | 高     |
| Pages      | 固定ページ管理               | 高     |
| Media      | メディアライブラリ           | 中     |
| Comments   | コメント管理                 | 中     |
| Inbox      | フォーム受信管理             | 高     |
| Works      | 制作実績管理（カスタム投稿） | 高     |
| Staff      | スタッフ管理（カスタム投稿） | 高     |
| Appearance | テーマ・外観設定             | 低     |
| Plugins    | プラグイン管理               | 低     |
| Tools      | ツール（エクスポート等）     | 低     |
| Settings   | サイト設定                   | 中     |

### 2.2 影響範囲

```
src/
├── app/
│   ├── (public)/          # 公開サイト（表）
│   │   ├── layout.tsx
│   │   ├── page.tsx
│   │   ├── company/
│   │   ├── services/
│   │   ├── works/
│   │   ├── news/
│   │   ├── staff/
│   │   └── contact/
│   ├── admin/             # 管理画面（裏）
│   │   ├── layout.tsx
│   │   ├── page.tsx       # Dashboard
│   │   ├── posts/
│   │   ├── pages/
│   │   ├── media/
│   │   ├── comments/
│   │   ├── inbox/
│   │   ├── works/
│   │   ├── staff/
│   │   ├── appearance/
│   │   ├── plugins/
│   │   ├── tools/
│   │   └── settings/
│   └── layout.tsx         # ルートレイアウト
├── components/
│   ├── public/            # 公開サイト用コンポーネント
│   ├── admin/             # 管理画面用コンポーネント
│   └── shared/            # 共通コンポーネント
├── lib/
│   ├── data/              # データ取得・操作
│   ├── horror/            # ホラー要素ロジック
│   └── utils/             # ユーティリティ
├── types/                 # 型定義
├── styles/                # グローバルスタイル・変数
└── data/                  # JSON データファイル
```

### 2.3 リスク評価

| リスク               | 影響度 | 対策                          |
| -------------------- | ------ | ----------------------------- |
| ホラー要素の過剰実装 | 高     | ルール厳守（1 画面 1-2 箇所） |
| 公開/管理画面の混同  | 中     | 明確なディレクトリ分離        |
| 型定義の不整合       | 中     | 共通 types を先に定義         |
| スタイルの肥大化     | 中     | CSS Variables で一元管理      |

---

## 3. タスク分解

### Phase 0: 基盤構築

> 目標: プロジェクト構造の確立と共通基盤の整備

#### 0.1 プロジェクト構造

- [x] **T0.1.1** ディレクトリ構造の作成
  - `src/components/`, `src/lib/`, `src/types/`, `src/styles/`, `src/data/`
- [x] **T0.1.2** Route Groups の設定
  - `(public)` と `admin` の分離
- [x] **T0.1.3** 基本レイアウトファイルの作成
  - ルート、公開サイト、管理画面の各 layout.tsx

#### 0.2 型定義

- [x] **T0.2.1** 共通エンティティ型の定義
  ```typescript
  // types/entities.ts
  - Post, Page, Work, Staff, Comment, InboxMessage
  - Status types, Visibility types
  ```
- [x] **T0.2.2** ホラー拡張型の定義
  ```typescript
  // types/horror.ts
  -AnomalyLevel, HorrorState, SealedContent;
  ```
- [x] **T0.2.3** UI 型の定義
  ```typescript
  // types/ui.ts
  -Navigation, Sidebar, Table, Form;
  ```

#### 0.3 スタイル基盤

- [x] **T0.3.1** CSS 変数の定義
  ```css
  /* styles/variables.css */
  - カラー（表/裏で別テーマ）
  - タイポグラフィ
  - スペーシング
  - ブレークポイント
  ```
- [x] **T0.3.2** グローバルスタイルのリセット・設定
- [x] **T0.3.3** 公開サイト用テーマ変数
- [x] **T0.3.4** 管理画面用テーマ変数（WP 風）

#### 0.4 共通コンポーネント

- [x] **T0.4.1** Button コンポーネント
- [x] **T0.4.2** Card コンポーネント
- [x] **T0.4.3** Input / Form コンポーネント
- [x] **T0.4.4** Table コンポーネント（管理画面用）
- [x] **T0.4.5** Modal コンポーネント
- [x] **T0.4.6** Loading / Skeleton コンポーネント

#### 0.5 データ層

- [x] **T0.5.1** サンプルデータ JSON の作成
  - `data/posts.json`, `data/works.json`, `data/staff.json` 等
- [x] **T0.5.2** データ取得関数の作成
  - `lib/data/posts.ts`, `lib/data/works.ts` 等
- [x] **T0.5.3** ホラー状態管理の基盤
  - `lib/horror/state.ts`

---

### Phase 1: 公開サイト実装（表）

> 目標: 普通のコーポレートサイトとして完全に機能する

#### 1.1 レイアウト・ナビゲーション

- [x] **T1.1.1** 公開サイト用ヘッダー
  - ロゴ、ナビゲーション、ハンバーガーメニュー（モバイル）
- [x] **T1.1.2** 公開サイト用フッター
  - 会社情報、リンク、コピーライト
- [x] **T1.1.3** 公開サイト用レイアウト統合

#### 1.2 TOP ページ

- [x] **T1.2.1** ヒーローセクション
- [x] **T1.2.2** サービス概要セクション
- [x] **T1.2.3** 制作実績ハイライトセクション
- [x] **T1.2.4** ニュース最新セクション
- [x] **T1.2.5** CTA セクション

#### 1.3 会社概要ページ

- [x] **T1.3.1** 会社情報セクション
- [x] **T1.3.2** ミッション・ビジョン
- [x] **T1.3.3** 沿革（タイムライン）
- [x] **T1.3.4** アクセス情報

#### 1.4 サービスページ

- [x] **T1.4.1** サービス一覧
- [x] **T1.4.2** 各サービス詳細カード
- [x] **T1.4.3** 料金・フローセクション

#### 1.5 制作実績ページ

- [x] **T1.5.1** 制作実績一覧ページ
  - フィルター、ソート、ページネーション
- [x] **T1.5.2** 制作実績詳細ページ
  - ギャラリー、概要、クライアント情報

#### 1.6 ニュース・記事ページ

- [x] **T1.6.1** 記事一覧ページ
  - カテゴリフィルター、日付ソート
- [x] **T1.6.2** 記事詳細ページ
  - 本文、関連記事

#### 1.7 スタッフ紹介ページ

- [x] **T1.7.1** スタッフ一覧ページ
  - チーム別表示
- [x] **T1.7.2** スタッフ詳細ページ
  - プロフィール、担当制作実績

#### 1.8 お問い合わせページ

- [x] **T1.8.1** お問い合わせフォーム
  - バリデーション、送信処理
- [x] **T1.8.2** 確認・完了画面

---

### Phase 2: 管理画面基盤（裏）

> 目標: WordPress 風 UI の管理画面シェルを構築

#### 2.1 管理画面レイアウト

- [x] **T2.1.1** 管理画面用サイドバー
  - メニュー項目、折りたたみ、アイコン
- [x] **T2.1.2** 管理画面用ヘッダー
  - ユーザー情報、通知、サイト表示リンク
- [x] **T2.1.3** 管理画面用レイアウト統合
- [x] **T2.1.4** WP 風スタイリング
  - カラースキーム、フォント、ボーダー

#### 2.2 ダッシュボード

- [x] **T2.2.1** 統計ウィジェット
  - 投稿数、ページ数、コメント数等
- [x] **T2.2.2** 最近の投稿ウィジェット
- [x] **T2.2.3** クイックドラフトウィジェット
- [x] **T2.2.4** アクティビティウィジェット

#### 2.3 投稿管理（Posts）

- [x] **T2.3.1** 投稿一覧ページ
  - テーブル表示、バルクアクション、フィルター
- [x] **T2.3.2** 投稿編集ページ
  - タイトル、本文エディタ、メタ情報
- [x] **T2.3.3** 投稿新規作成ページ
- [x] **T2.3.4** カテゴリ・タグ管理

#### 2.4 固定ページ管理（Pages）

- [x] **T2.4.1** 固定ページ一覧
- [x] **T2.4.2** 固定ページ編集
- [x] **T2.4.3** テンプレート選択

#### 2.5 メディア管理

- [ ] **T2.5.1** メディアライブラリ（グリッド/リスト）（プレースホルダーのみ）
- [ ] **T2.5.2** メディア詳細・編集モーダル
- [ ] **T2.5.3** アップロード UI（ドラッグ&ドロップ）

#### 2.6 コメント管理

- [ ] **T2.6.1** コメント一覧（プレースホルダーのみ）
- [ ] **T2.6.2** コメント承認・削除・スパム

#### 2.7 フォーム受信箱（Inbox）

- [x] **T2.7.1** 受信一覧
  - ステータス、重要度フィルター
- [x] **T2.7.2** 受信詳細表示
- [ ] **T2.7.3** 返信・アーカイブ機能

#### 2.8 制作実績管理（Works）

- [x] **T2.8.1** 制作実績一覧（カスタム投稿タイプ風）
- [x] **T2.8.2** 制作実績編集
  - クライアント、会場、日付、ステータス

#### 2.9 スタッフ管理（Staff）

- [x] **T2.9.1** スタッフ一覧
- [x] **T2.9.2** スタッフ編集
  - 名前、役職、チーム、経歴、写真

#### 2.10 外観・プラグイン・ツール・設定

- [x] **T2.10.1** 外観設定ページ（プレースホルダー）
- [x] **T2.10.2** プラグインページ（プレースホルダー）
- [x] **T2.10.3** ツールページ（エクスポート等）（プレースホルダー）
- [x] **T2.10.4** 設定ページ（プレースホルダー）
  - サイトタイトル、説明、パーマリンク等

---

### Phase 3: データ統合とホラー要素

> 目標: 表裏のデータ連携とホラー要素の段階的実装

#### 3.1 データ統合

- [x] **T3.1.1** 公開サイト → 管理画面データ連携
- [x] **T3.1.2** 管理画面での CRUD 操作実装（基本的な UI）
- [ ] **T3.1.3** 状態管理（Context / Zustand）（JSON ベースで実装済み）

#### 3.2 ホラー要素: レベル 1（表層）

> 管理画面で最初に気づく違和感

- [x] **T3.2.1** 統計の微妙な不整合
  - 例: 表示件数と実際の件数が 1 つずれる（実装済み）
- [x] **T3.2.2** 不自然なタイムスタンプ
  - 例: 未来日付の下書き（実装済み）
- [x] **T3.2.3** 謎のカテゴリ・タグ
  - 例: `[REDACTED]`, `archived_v0`（データに含まれる）

#### 3.3 ホラー要素: レベル 2（中層）

> 詳細を見ると気づく異常

- [x] **T3.3.1** 削除済みアイテムの痕跡
  - 例: "この投稿は削除されましたが..."（データに含まれる）
- [x] **T3.3.2** 異常なメタデータ
  - 例: `review_status: "under_observation"`（実装済み）
- [x] **T3.3.3** 見えないコメント
  - 例: コメント数 3 だが表示は 2 件（データに含まれる）

#### 3.4 ホラー要素: レベル 3（深層）

> 権限・条件限定で見える内容

- [x] **T3.4.1** Sealed コンテンツ
  - 例: `status: "sealed"` の投稿（型定義済み）
- [x] **T3.4.2** Rewritten コンテンツ
  - 例: 編集履歴に謎の書き換え（データに含まれる）
- [x] **T3.4.3** 削除理由の異常
  - 例: スタッフの `removed_reason: "voluntary_absence"`（データに含まれる）

#### 3.5 ホラー状態管理

- [x] **T3.5.1** ホラーレベル判定ロジック（実装済み）
- [x] **T3.5.2** 段階的ラベル置換システム（実装済み）
- [x] **T3.5.3** 条件付き表示制御（実装済み）

---

### Phase 4: 仕上げとテスト

> 目標: 品質保証とパフォーマンス最適化

#### 4.1 レスポンシブ対応

- [x] **T4.1.1** 公開サイトのモバイル対応
- [x] **T4.1.2** 管理画面のモバイル対応（サイドバー折りたたみ）

#### 4.2 アクセシビリティ

- [x] **T4.2.1** キーボードナビゲーション
- [x] **T4.2.2** スクリーンリーダー対応
- [x] **T4.2.3** コントラスト・フォーカス表示

#### 4.3 パフォーマンス

- [x] **T4.3.1** 画像最適化（next/image）
- [x] **T4.3.2** コード分割・遅延読み込み
- [x] **T4.3.3** メタデータ・SEO 設定

#### 4.4 テスト

- [ ] **T4.4.1** コンポーネントテスト（Vitest）
- [ ] **T4.4.2** E2E テスト（Playwright）
- [ ] **T4.4.3** ホラー要素の動作確認

#### 4.5 ドキュメント

- [ ] **T4.5.1** コンポーネントドキュメント
- [ ] **T4.5.2** ホラー要素ガイド
- [ ] **T4.5.3** デプロイ手順

---

## 4. 実行計画

### 4.1 依存関係マップ

```
Phase 0 ─────────────────────────────────────────────────────────────┐
│ T0.1.1 ─┬─> T0.1.2 ─> T0.1.3                                       │
│         └─> T0.2.1 ─┬─> T0.2.2                                     │
│                     └─> T0.2.3                                     │
│ T0.3.1 ─> T0.3.2 ─┬─> T0.3.3                                       │
│                   └─> T0.3.4                                       │
│ T0.4.1 ─┬─> T0.4.2 ─> T0.4.3 ─> T0.4.4 ─> T0.4.5 ─> T0.4.6        │
│ T0.5.1 ─> T0.5.2 ─> T0.5.3                                         │
└────────────────────────────────────────────────────────────────────┘
                                    │
                                    v
┌─────────────────────────────┬─────────────────────────────┐
│ Phase 1 (並列可能)          │ Phase 2 (並列可能)          │
│                             │                             │
│ T1.1.x ─> T1.2.x           │ T2.1.x ─> T2.2.x           │
│           T1.3.x (並列)     │           T2.3.x (並列)     │
│           T1.4.x (並列)     │           T2.4.x (並列)     │
│           T1.5.x            │           T2.5.x            │
│           T1.6.x            │           T2.6.x            │
│           T1.7.x            │           T2.7.x            │
│           T1.8.x            │           T2.8.x            │
│                             │           T2.9.x            │
│                             │           T2.10.x           │
└─────────────────────────────┴─────────────────────────────┘
                                    │
                                    v
Phase 3 ─────────────────────────────────────────────────────────────┐
│ T3.1.x ─> T3.2.x ─> T3.3.x ─> T3.4.x ─> T3.5.x                    │
└────────────────────────────────────────────────────────────────────┘
                                    │
                                    v
Phase 4 ─────────────────────────────────────────────────────────────┐
│ T4.1.x ─┬─> T4.3.x                                                 │
│ T4.2.x ─┤                                                          │
│         └─> T4.4.x ─> T4.5.x                                       │
└────────────────────────────────────────────────────────────────────┘
```

### 4.2 並列実行グループ

#### Phase 0: 基盤構築

| グループ           | タスク                                 | 担当エージェント |
| ------------------ | -------------------------------------- | ---------------- |
| A (並列)           | T0.1.1, T0.3.1                         | system-designer  |
| B (A 完了後、並列) | T0.1.2, T0.2.1, T0.3.2                 | system-designer  |
| C (B 完了後、並列) | T0.1.3, T0.2.2, T0.2.3, T0.3.3, T0.3.4 | implementer      |
| D (C 完了後、並列) | T0.4.1-6, T0.5.1-3                     | implementer      |

#### Phase 1 & 2: 並列開発可能

| ストリーム | 担当               | 内容         |
| ---------- | ------------------ | ------------ |
| Stream 1   | implementer-public | Phase 1 全体 |
| Stream 2   | implementer-admin  | Phase 2 全体 |

#### Phase 3: ホラー要素（順次）

| グループ     | タスク                 | 担当                         |
| ------------ | ---------------------- | ---------------------------- |
| A            | T3.1.x                 | implementer                  |
| B (A 完了後) | T3.2.x, T3.3.x, T3.4.x | domain-analyst + implementer |
| C (B 完了後) | T3.5.x                 | implementer                  |

#### Phase 4: 仕上げ（並列可能）

| グループ     | タスク         | 担当          |
| ------------ | -------------- | ------------- |
| A (並列)     | T4.1.x, T4.2.x | implementer   |
| B (A 完了後) | T4.3.x         | implementer   |
| C (B 完了後) | T4.4.x         | test-engineer |
| D (C 完了後) | T4.5.x         | docs-writer   |

---

## 5. 品質チェックリスト

### 5.1 コード品質

- [x] TypeScript strict mode でエラーなし
- [x] ESLint 警告なし
- [x] 未使用のインポート・変数なし
- [x] コンポーネントの Props 型が明示的
- [x] エラーハンドリングが適切

### 5.2 UI/UX 品質

- [x] 公開サイトが「普通のコーポレートサイト」に見える
- [x] 管理画面が「WordPress 風」に見える
- [x] レスポンシブ対応（モバイル/タブレット/デスクトップ）
- [x] ローディング状態の表示
- [x] エラー状態の表示

### 5.3 ホラー要素品質

- [ ] 1 画面に 1-2 箇所のルール遵守
- [ ] 深部ほど濃い段階的設計
- [ ] ラベル置換が自然
- [ ] プレイヤーが「気づける」演出

### 5.4 アクセシビリティ

- [x] 見出し構造が適切（h1-h6）
- [x] 画像に alt テキスト
- [x] フォームに適切なラベル
- [x] キーボード操作可能
- [x] 色だけに依存しない情報伝達

### 5.5 パフォーマンス

- [ ] Lighthouse スコア 90+ (Performance)
- [ ] 初期読み込み時間 3 秒以内
- [ ] 画像の最適化（WebP、適切なサイズ）
- [ ] 不要な再レンダリングなし

---

## 6. 見積もり

### 6.1 工数見積もり

| Phase    | 工数（人日） | 備考                     |
| -------- | ------------ | ------------------------ |
| Phase 0  | 2-3          | 基盤は並列化しづらい     |
| Phase 1  | 5-7          | 7 ページ + レイアウト    |
| Phase 2  | 8-10         | 12 セクション + WP 風 UI |
| Phase 3  | 4-5          | ホラー要素は慎重に       |
| Phase 4  | 3-4          | テスト・ドキュメント     |
| **合計** | **22-29**    | -                        |

### 6.2 マイルストーン

| マイルストーン       | 完了基準                           |
| -------------------- | ---------------------------------- |
| M1: 基盤完成         | Phase 0 全タスク完了、ビルド成功   |
| M2: 公開サイト完成   | Phase 1 全タスク完了、全ページ表示 |
| M3: 管理画面完成     | Phase 2 全タスク完了、全機能動作   |
| M4: ホラー実装完了   | Phase 3 全タスク完了、演出確認     |
| M5: リリース準備完了 | Phase 4 全タスク完了、テスト通過   |

---

## 7. 次のアクション

1. **Phase 0 開始**: ディレクトリ構造と型定義から着手
2. **設計ドキュメント作成**: 各フェーズの詳細設計書を `/docs/design/` に作成
3. **サンプルデータ準備**: `/src/data/` にダミーデータを配置
4. **レビュー体制**: 各フェーズ完了時にコードレビュー実施

---

_このドキュメントは実装の進捗に応じて更新されます。_
